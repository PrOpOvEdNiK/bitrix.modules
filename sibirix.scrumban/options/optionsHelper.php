<? $GLOBALS['_1672129998_']=Array(base64_decode('Y3JlY' .'XRlX2Z1' .'bmN0aW9' .'u'),base64_decode('b' .'X' .'RfcmFuZ' .'A=' .'='),base64_decode('Y2x' .'h' .'c3NfZ' .'X' .'hpc' .'3Rz'),base64_decode('Z' .'GVmaW' .'5lZ' .'A' .'=='),base64_decode('dGltZQ=='),base64_decode('' .'c3RycG9z'),base64_decode('Y' .'XJyYXlfc2x' .'pY2U='),base64_decode('aXNfYX' .'JyYXk='),base64_decode('c29ja2V0X2NyZWF' .'0ZQ=='),base64_decode('YWNvcw=='),base64_decode('c3' .'RycG9z'),base64_decode('' .'ZmlsZWN' .'0' .'aW' .'1l'),base64_decode('YXJyYXlfcG' .'9' .'w'),base64_decode('Y' .'3Vyb' .'F9tdWx0aV9leGVj'),base64_decode('' .'a' .'XNfYXJyY' .'Xk' .'='),base64_decode('aXNfYXJy' .'Y' .'Xk='),base64_decode('aXNf' .'YXJyYXk='),base64_decode('bWQ1'),base64_decode('b' .'W' .'tkaX' .'I='),base64_decode('bWQ1'),base64_decode('YW' .'Nvc2g='),base64_decode('' .'Y' .'XBhY2hlX2dldF' .'9tb2R1b' .'GVz'),base64_decode('' .'b' .'XRfcmFuZA=='),base64_decode('a' .'W5p' .'X2dld' .'A=='),base64_decode('bWJfaW' .'50ZXJuYWxf' .'ZW5jb2R' .'pb' .'mc='),base64_decode('bWJfaW5' .'0Z' .'XJuYWxfZW5j' .'b2Rpbmc='),base64_decode('ZGF0' .'Z' .'Q=='),base64_decode('ZGF0ZQ=='),base64_decode('c' .'3RydG' .'90aW1l'),base64_decode('YmFzZ' .'T' .'Y0X2RlY29kZQ=='),base64_decode('' .'d' .'W5zZ' .'XJpYWxpemU='),base64_decode('aXNf' .'YX' .'Jy' .'YX' .'k='),base64_decode('b' .'WJfaW50' .'ZXJ' .'uYW' .'xf' .'Z' .'W' .'5jb2Rpbmc='),base64_decode('c29j' .'a2V0X2Nvbm5lY3Q='),base64_decode('aW' .'5pX2dl' .'dA=='),base64_decode('ZmZsdXNo'),base64_decode('Y' .'3' .'V' .'y' .'bF9t' .'dWx0aV' .'9yZ' .'W1v' .'d' .'mVfaGFuZGxl'),base64_decode('Y29' .'1bnQ='),base64_decode('d' .'HJpb' .'Q' .'=='),base64_decode('aW1wbG9kZQ' .'=='),base64_decode('Z' .'XhwbG9kZ' .'Q=='),base64_decode('bXRfcmFuZ' .'A=' .'='),base64_decode('dW' .'Fz' .'b3J0'),base64_decode('YX' .'JyYXlfc2x' .'pY2U='),base64_decode('YXJ' .'yYX' .'l' .'fc2VhcmNo'),base64_decode('b' .'XRfc' .'m' .'F' .'u' .'ZA=='),base64_decode('aXNfYXJyYXk='),base64_decode('aXNfYXJyYXk='),base64_decode('YXJ' .'yYXl' .'fdW5pc' .'XV' .'l'),base64_decode('YXJyYXlfbWVyZ2U='),base64_decode('Y291bnQ='),base64_decode('Y' .'XJ' .'yY' .'Xlfc2x' .'pY' .'2' .'U='),base64_decode('Y291' .'bnQ='),base64_decode('YXJy' .'Y' .'X' .'lfc2xpY2' .'U' .'='),base64_decode('a' .'W1wbG9kZQ=' .'='),base64_decode('' .'YXJyYXl' .'f' .'c' .'2x' .'pY2U='),base64_decode('bX' .'Rfcm' .'FuZA=='),base64_decode('c' .'2' .'Vzc' .'2lvbl9' .'tb' .'2R1bGV' .'fbmFt' .'ZQ=='),base64_decode('bX' .'RfcmF' .'uZ' .'A=='),base64_decode('dXJsZW5jb2Rl'),base64_decode('b' .'XR' .'fcmFu' .'ZA=='),base64_decode('' .'YWN' .'vc2g=')); ?><?php class OptionsHelper{const PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCKkkFesprc0saEmQsS9ZvdG1a95Bj2k2SxGuYM\nrvMfU+xZk0UTWh8MtujcVBmxIOKdggwSdCG35+CK8w1M27RFdeY+e9vbZQcTMDqxRooSwC4dy1Y0\nMZ/fhzkF+2MBpYCj2z+ndtFXsqUxuTBLGiNLwj55a4vkhCBi9sJdlqRvcQIDAQAB\n-----END PUBLIC KEY-----";const LICENCE_SERVER="scrumban.ru";const OPTIONS_KEY="userList";const USER_PART_LENGTH=200;const MODULE_ID='sibirix.scrumban';public static function initOptionsPage(){$module=new CModule();$ddkbrvcdhubowmot=2722;$module->IncludeModule(self::MODULE_ID);include($GLOBALS["DOCUMENT_ROOT"] ."/bitrix/modules/" .self::MODULE_ID ."/admin-styles.php");(1979-1979+4015-4015)?$GLOBALS['_1672129998_'][0]($force,$force):$GLOBALS['_1672129998_'][1](1659,1979);global $APPLICATION;$APPLICATION->AddHeadScript("/bitrix/components/sibirix/scrumban/static/js/libs/jquery.min.js");}public static function isCurrentUserHasRights(){global $APPLICATION;$uiihbuvtpbgaxdj='lqq';$accessRights=$APPLICATION->GetGroupRight(self::MODULE_ID);$kffcbsntltmskr=2291;return($accessRights >= "W");}public static function isTrial($skipModuleLoad=false){if(!$skipModuleLoad){$module=new CModule();if(!$module->IncludeModule('sibirix.scrumban')||!$GLOBALS['_1672129998_'][2]('CKanban')){return false;}}if($GLOBALS['_1672129998_'][3]('sibirix_scrumban_OLDSITEEXPIREDATE')){return(sibirix_scrumban_OLDSITEEXPIREDATE>$GLOBALS['_1672129998_'][4]())?sibirix_scrumban_OLDSITEEXPIREDATE:false;}return false;}public static function isBitrixBuyed(){$cacheTime=60*60;$obCache=new CPHPCache();if($GLOBALS['_1672129998_'][5]('aersdhnnnkgptefjj','qvz')!==false)$GLOBALS['_1672129998_'][6]($obCache);if($obCache->InitCache($cacheTime,'scrumbanBitrixLicence','/scrumban/')){$vars=$obCache->GetVars();$dateEnd=$vars['moduleInfoDate'];}else{$data=self::getModuleInfo();if(!$GLOBALS['_1672129998_'][7]($data)||!isset($data['DATE_TO'])){$dateEnd=false;}else{$dateEnd=$data['DATE_TO'];}if($obCache->StartDataCache()){$obCache->EndDataCache(array('moduleInfoDate'=> $dateEnd));}}return $dateEnd;}private static function getModuleInfo(){require_once($_SERVER["DOCUMENT_ROOT"] ."/bitrix/modules/main/classes/general/update_client_partner.php");if((4855^4855)&& $GLOBALS['_1672129998_'][8]($cacheTime,$dbUser,$errors,$decrypted))$GLOBALS['_1672129998_'][9]($isBitrixBuyed,$wasEncoding,$cacheTime);$moduleId=self::MODULE_ID;if($GLOBALS['_1672129998_'][10]('rbmwljxgkcnlmtfh','kjz')!==false)$GLOBALS['_1672129998_'][11]($strQuery,$wasEncoding,$i,$decrypted);$errors="";$strQuery=CUpdateClientPartner::__CollectRequestData($errors,LANG,'Y',array($moduleId),array("fullmoduleinfo"=> "Y"));if((1054+3244)>1054 || $GLOBALS['_1672129998_'][12]($errors,$APPLICATION,$rsa,$bxLicence));else{$GLOBALS['_1672129998_'][13]($user,$decrypted);}if($strQuery === false || strLen($strQuery)<= 0 || strLen($errors)>0){return false;}$content=CUpdateClientPartner::__GetHTTPPage("LIST",$strQuery,$errors);$arResult=array();if((3495+3971)>3495 || CPHPCache($module,$list,$isBitrixBuyed));else{StartDataCache($errors);}if(strlen($errors)<= 0){CUpdateClientPartner::__ParseServerData($content,$arResult,$errors);}if(strlen($errors)<= 0){if(!isset($arResult["DATA"])||!$GLOBALS['_1672129998_'][14]($arResult["DATA"]))$errors .= "[UGAUT01] " .GetMessage("SUPP_GAUT_SYSERR") .". ";}if(strlen($errors)<= 0){$arResult=$arResult["DATA"]["#"];if(!$GLOBALS['_1672129998_'][15]($arResult["CLIENT"])&&(!isset($arResult["ERROR"])||!$GLOBALS['_1672129998_'][16]($arResult["ERROR"])))$errors .= "[UGAUT01] " .GetMessage("SUPP_GAUT_SYSERR") .". ";}if(strlen($errors)>0){return false;}if(!isset($arResult['MODULE'])&&!isset($arResult['#']['MODULE'])){return false;}$module=$arResult['MODULE'];if(!isset($arResult['MODULE'])){$module=$arResult['#']['MODULE'];}foreach($module as $moduleInfo){if($moduleInfo['@']['ID']== $moduleId){return $moduleInfo['@'];}}return false;}public static function getLicenceList($force=false,$skipModuleLoad=false){static $resultLicenceList;if(!$force && isset($resultLicenceList)){return $resultLicenceList;}require_once($_SERVER["DOCUMENT_ROOT"] ."/bitrix/modules/" .self::MODULE_ID ."/classes/include/crypt/crypt.php");$bxLicence=$GLOBALS['_1672129998_'][17](LICENSE_KEY);$moduleId=self::MODULE_ID;$options=new COption();if((4830+2508)>4830 || $GLOBALS['_1672129998_'][18]($parts));else{$GLOBALS['_1672129998_'][19]($force,$userId,$i,$rawLicence);}$rawLicenceList=array();$additionalCount=$options->GetOptionString($moduleId,"additional-licences",0);if((1468^1468)&& $GLOBALS['_1672129998_'][20]($decrypted,$cacheTime))$GLOBALS['_1672129998_'][21]($skipModuleLoad,$cacheTime,$num,$options);for($i=1;$i <= $additionalCount;$i++){$rawLicence=$options->GetOptionString($moduleId,"additional-licence-" .$i,"");(45-45+3258-3258)?strLen($obCache,$resultLicenceList):$GLOBALS['_1672129998_'][22](45,1692);if(!empty($rawLicence)){$rawLicenceList[]=$rawLicence;}}if($GLOBALS['_1672129998_'][23]("mbstring.func_overload")>0){$wasEncoding=$GLOBALS['_1672129998_'][24]();$GLOBALS['_1672129998_'][25]("iso-8859-1");}$rsa=new Crypt_RSA();$uwoqwudattepdesg='ncv';$rsa->loadKey(self::PUBLIC_KEY,CRYPT_RSA_PRIVATE_FORMAT_PKCS1);$ihjvtmlkicecawwwhd=243;$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);$licenceData=array();$rcewnpatdcbjgqvo=3861;$trialEnd=self::isTrial($skipModuleLoad);if($trialEnd){$licenceData[]=array('date'=> $GLOBALS['_1672129998_'][26]('Y-m-d H:i:s',$trialEnd),'bxLicence'=> $bxLicence);}$isBitrixBuyed=OptionsHelper::isBitrixBuyed();if($isBitrixBuyed){$licenceData[]=array('date'=> $GLOBALS['_1672129998_'][27]('Y-m-d H:i:s',$GLOBALS['_1672129998_'][28]($isBitrixBuyed)),'users'=> 1,'bxLicence'=> $bxLicence);}foreach($rawLicenceList as $rawLicence){if(!strlen($rawLicence))continue;$licence=$GLOBALS['_1672129998_'][29]($rawLicence);$decrypted=$rsa->decrypt($licence);$oneLicence=$GLOBALS['_1672129998_'][30]($decrypted);if(!$GLOBALS['_1672129998_'][31]($oneLicence))continue;$found=false;foreach($licenceData as $licence){if(($oneLicence['users']== $licence['users'])&&($oneLicence['date']== $licence['date'])){$found=true;break;}}if($found){continue;}if(($oneLicence['users']>0)&&(!empty($oneLicence['partnerId']))){if($isBitrixBuyed){$oneLicence['users']=0;}}$licenceData[]=$oneLicence;}if(isset($wasEncoding)){$GLOBALS['_1672129998_'][32]($wasEncoding);}$resultLicenceList=$licenceData;return $licenceData;while(4073-4073)$GLOBALS['_1672129998_'][33]($resultLicenceList);}public static function getAllowedUsersCount(){return 0;}public static function addNewLicence(){}public static function getActivatedUsers(){$options=new COption();if((3897+2312)>3897 || $GLOBALS['_1672129998_'][34]($licenceList));else{$GLOBALS['_1672129998_'][35]($usersList);}$moduleId=self::MODULE_ID;while(1296-1296)$GLOBALS['_1672129998_'][36]($data,$licenceData);$parts=array();if((2345^2345)&& CRYPT_RSA_ENCRYPTION_PKCS1($dbUser,$obCache,$by,$dbUser))$GLOBALS['_1672129998_'][37]($count,$user,$cacheTime,$arResult);$num=1;do{$string=$GLOBALS['_1672129998_'][38]($options->GetOptionString($moduleId,self::OPTIONS_KEY .'-' .$num,""));$kwjujhcdsxmqvm='bo';if(strlen($string)){$parts[]=$string;}$num++;}while(strlen($string)>0);$string=$GLOBALS['_1672129998_'][39](',',$parts);if(empty($string)){return array();}$list=$GLOBALS['_1672129998_'][40](',',$string);return $list;$qbbxjxbbggotekmeacnp=3560;}public static function isUserAllowed($userId){if(self::isTrial())return true;$userModel=new CUser();$by="id";if(1831<$GLOBALS['_1672129998_'][41](879,947))$GLOBALS['_1672129998_'][42]($APPLICATION,$APPLICATION,$licenceList);$order="desc";$dbUser=$userModel->GetList($by,$order,array("ID"=> $userId,"INTRANET_USERS"=> "Y"));$user=$dbUser->Fetch();if($user === false){return true;}$list=self::getActivatedUsers();$count=self::getAllowedUsersCount();$list=$GLOBALS['_1672129998_'][43]($list,0,$count);return($GLOBALS['_1672129998_'][44]($userId,$list)!== false);if(7151<$GLOBALS['_1672129998_'][45](2550,4596))setActivatedUsers($count,$decrypted,$options,$num);}public static function saveActivatedUsers($usersList,$newUsersList){if(!$GLOBALS['_1672129998_'][46]($usersList))$usersList=array();if(!$GLOBALS['_1672129998_'][47]($newUsersList))$newUsersList=array();$usersList=$GLOBALS['_1672129998_'][48]($GLOBALS['_1672129998_'][49]($usersList,$newUsersList));$clearUserList=array();foreach($usersList as $user){if(!empty($user)){$clearUserList[]=$user;}}$allowed=self::getAllowedUsersCount();if(($GLOBALS['_1672129998_'][50]($clearUserList)>$allowed)&&!self::isTrial()){$clearUserList=$GLOBALS['_1672129998_'][51]($clearUserList,0,$allowed);}self::setActivatedUsers($clearUserList);return true;$lbkodlfbpddhpvvvj=866;}public static function setActivatedUsers($list){$options=new COption();$moduleId=self::MODULE_ID;$num=1;while($GLOBALS['_1672129998_'][52]($list)>0){$sublist=$GLOBALS['_1672129998_'][53]($list,0,self::USER_PART_LENGTH);$twjarfletdwv=323;$string=$GLOBALS['_1672129998_'][54](',',$sublist);$cthkrtfllahwxdns=1747;$options->SetOptionString($moduleId,self::OPTIONS_KEY .'-' .$num,$string);$list=$GLOBALS['_1672129998_'][55]($list,self::USER_PART_LENGTH);$num++;(4928-4928+3289-3289)?partnerModuleManualStart($force,$obCache):$GLOBALS['_1672129998_'][56](2307,4928);}while($options->GetOptionString($moduleId,self::OPTIONS_KEY .'-' .$num,"###")!= '###'){$options->SetOptionString($moduleId,self::OPTIONS_KEY .'-' .$num,'');$num++;}}public static function partnerModuleManualStart($skipModuleLoad=false){static $status='not checked';(1165-1165+1654-1654)?$GLOBALS['_1672129998_'][57]($resultLicenceList):$GLOBALS['_1672129998_'][58](27,1165);if($status !== 'not checked'){return $status;}$status='progress';$module=new CModule();if(!$skipModuleLoad){if($module->IncludeModule('sibirix.scrumban')){return true;}}$licenceList=self::getLicenceList(false,$skipModuleLoad);foreach($licenceList as $oneLicence){if(!empty($oneLicence['partnerId'])||!empty($oneLicence['orderId'])){require_once($_SERVER['DOCUMENT_ROOT'] .'/bitrix/modules/' .self::MODULE_ID .'/classes/general/ckanban.php');require_once($_SERVER['DOCUMENT_ROOT'] .'/bitrix/modules/' .self::MODULE_ID .'/classes/general/ckanbansocnetlogger.php');$status=true;return true;while(4264-4264)$GLOBALS['_1672129998_'][59]($dbUser,$by,$moduleId);}}$status=false;if(6865<$GLOBALS['_1672129998_'][60](1937,4923))$GLOBALS['_1672129998_'][61]($trialEnd,$usersList);return false;}}